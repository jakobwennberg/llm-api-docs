# Apicommonsservice.Htm

**Source:** https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm  
**Scraped:** 2025-08-01 11:22:36

---

[ ![](https://help.certinia.com/api/resources/images/Logo.png) ](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/Default.htm) Professional Services Automation Apex API Developer Reference |   
---|---  
    * [Home](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/Default.htm)
    * [Getting Started](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [Certinia API](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/GenericAPI.htm)
    * [Actuals](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [APIActualsService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APIActualsService.htm)
    * [Billing](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [APIBillingService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APIBillingService.htm)
      * [BillingDocumentService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/BillingDocumentService.htm)
      * [BillingEventsManager](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/BillingEventsManager.htm)
    * [Common](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [APICommonsService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm)
      * [CalendarUtil](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/CalendarUtil.htm)
    * [Exceptions](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [APIException](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APIException.htm)
    * [Milestones](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [MilestoneService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/MilestoneService.htm)
    * [Miscellaneous](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [MultiCurrencyService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/MultiCurrencyService.htm)
    * [Project Versioning and Baselines](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [VersionConfigService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/VersionConfigService.htm)
      * [VersionService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/VersionService.htm)
    * [Projects and Project Tasks](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [AddFromProjectTemplateService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/AddFromProjectTemplateService.htm)
      * [CreateProjectFromTemplateService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/CreateProjectFromTemplateService.htm)
      * [SObjectCloneMapper](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/SObjectCloneMapper.htm)
      * [TaskManagementService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/TaskManagementService.htm)
    * [Rate Cards](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [RateCardMatcherPlugin](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/RateCardMatcherPlugin.htm)
    * [Resource Management](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [ResourceAssignmentService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/ResourceAssignmentService.htm)
      * [ResourceSearchService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/ResourceSearchService.htm)
      * [ScheduleResourceService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/ScheduleResourceService.htm)
    * [Scheduling](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [AssignmentService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/AssignmentService.htm)
      * [HoursToDaysRuleService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/HoursToDaysRuleService.htm)
      * [ScheduleSaveDTO](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/ScheduleSaveDTO.htm)
      * [ScheduleService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/ScheduleService.htm)
      * [SchedulingStrategyService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/SchedulingStrategyService.htm)
    * [Services Forecasting](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [RevenueForecastScheduler](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/RevenueForecastScheduler.htm)
      * [RevenueForecastService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/RevenueForecastService.htm)
      * [RevenueForecastVersionScheduler](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/RevenueForecastVersionScheduler.htm)
      * [RevenueForecastVersionService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/RevenueForecastVersionService.htm)
    * [Shift Management](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [TeamScheduleService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/TeamScheduleService.htm)
      * [TeamScheduleTemplateService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/TeamScheduleTemplateService.htm)
    * [Skills](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [SkillsService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/SkillsService.htm)
    * [Time And Expense](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [PSATimecardService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/PSATimecardService.htm)
    * [Utilization Analytics](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/)
      * [UtilizationAnalyticsService](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/UtilizationAnalyticsService.htm)

|  pse.APICommonsService global with sharing class APICommonsService
  * [iBatchCallback](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#iBatchCallback)
  * [BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext)
  * [BatchStatus](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchStatus)


## Enums
BatchJobType | Value | Description  
---|---  
Clear | PSA billing process to clear billing data for billing event items, billing events, budgets, expense reports, expenses milestones, miscellaneous adjustments, timecard splits and timecards.  
Generate | PSA billing process to generate billing data.  
Invoice | PSA billing process to invoice billing events.  
Recalc | PSA billing process to recalculate the billing information for unreleased billing events.  
Release | PSA billing process to release billing events.  
Remove | PSA billing process to remove billing event batches.  
pse.APICommonsService.iBatchCallback
global interface iBatchCallback
You can use the iBatchCallback global interface to hook into PSA billing processes such as:   
• Clear   
• Generate   
• Invoice   
• Release   
• Remove   
These interface hooks are called during PSA billing processes and each method is called even when a process is executed inline rather than as a batch. To use these hooks, you must write classes that implement the iBatchCallback interface. Once you have written a class to handle a billing process, you must instruct PSA to use it. To do this, add a value containing the name of your class to the appropriate billing Interface configuration option in the Billing configuration group. For information about configuring PSA to use a custom billing class, see the PSA Help.   

## Methods
  * [void beforeStart(pse.APICommonsService.BatchContext bc)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#beforeStart0)
  * [void afterStart(pse.APICommonsService.BatchContext bc)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#afterStart0)
  * [void beforeExecute(pse.APICommonsService.BatchContext bc, set<Id> scope)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#beforeExecute0)
  * [void afterExecute(pse.APICommonsService.BatchContext bc, set<Id> scope)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#afterExecute0)
  * [void beforeFinish(pse.APICommonsService.BatchContext bc)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#beforeFinish0)
  * [void afterFinish(pse.APICommonsService.BatchContext bc)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#afterFinish0)
  * [BatchJobType getJobType()](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#getJobType0)


beforeStart
_void beforeStart(pse.APICommonsService.BatchContext bc)_
This method is called before the logic of the Start method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global void beforeStart(pse.APICommonsService.BatchContext bc){} 

```

afterStart
_void afterStart(pse.APICommonsService.BatchContext bc)_
This method is called after the logic of the Start method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global void afterStart(pse.APICommonsService.BatchContext bc){}

```

beforeExecute
_void beforeExecute(pse.APICommonsService.BatchContext bc, set <Id> scope)_
This method is called before the logic of the Execute method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
scope | set<Id> | Contains the IDs of the records being processed in a specific batch.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global void beforeExecute(pse.APICommonsService.BatchContext bc, Set<ID> scope){} 

```

afterExecute
_void afterExecute(pse.APICommonsService.BatchContext bc, set <Id> scope)_
This method is called after the logic of the Execute method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
scope | set<Id> | Contains the IDs of the records being processed in a specific batch.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.


```

beforeFinish
_void beforeFinish(pse.APICommonsService.BatchContext bc)_
This method is called before the logic of the Finish method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global void beforeFinish(pse.APICommonsService.BatchContext bc){}

```

afterFinish
_void afterFinish(pse.APICommonsService.BatchContext bc)_
This method is called after the logic of the Finish method of a batch is processed.
#### Input Parameters
Name | Type | Description  
---|---|---  
bc | [pse.APICommonsService.BatchContext](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchContext) | Information about the context of the job.  
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global void afterFinish(pse.APICommonsService.BatchContext bc){
  BillingContext bbc = (BillingContext)bc;
 
  appirio_core__Config_Value__c cv = [SELECT id,appirio_core__Value__c
    FROM appirio_core__Config_Value__c
    WHERE appirio_core__Config_Option__r.Name = 'nextInvoiceNumber'
    ];
 
    Integer invNum = Integer.valueOf(cv.appirio_core__Value__c);
 
    List<pse.BillingEventsManager.InvoiceInfo> invoiceInfo = new List<pse.BillingEventsManager.InvoiceInfo>();
    for (ID id : bbc.ids)
    {
      pse.BillingEventsManager.InvoiceInfo ii = new pse.BillingEventsManager.InvoiceInfo(id,String.ValueOf(invNum),Date.today());
      invoiceInfo.add(ii);
      invNum++;
    }
    cv.appirio_core__Value__c = String.ValueOf(invNum);
    update cv;
 
    pse.APIBillingService.Invoice(invoiceInfo);
}

```

getJobType
_BatchJobType getJobType()_
This method must be implemented by the creator of any class that implements the iBatchCallback interface. This indicates the PSA billing process that the class is to intends to implement. These PSA billing processes all confirm that the implemented type matches their identity:   
• Clear   
• Generate   
• Invoice   
• Recalc   
• Release   
• Remove
#### Return Value
This method returns an APICommonsService.BatchJobType object.
#### Sample Code
```
//Note: This sample code is for demonstration purposes only. It is not intended for
//use in a production environment, is not guaranteed against defects or errors, and
//is in no way optimized or streamlined.

global pse.APICommonsService.BatchJobType getJobType(){return pse.APICommonsService.BatchJobType.Release;}

```

pse.APICommonsService.BatchContext
global inherited sharing abstract class BatchContext
BatchContext contains information about the context of the job. This is specific to each process and is based on the information used to launch that process.   

## Properties
Name | Type | Description  
---|---|---  
context | Database.BatchableContext |  Information about the context of the job.   
  
jobType | [pse.APICommonsService.BatchJobType](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchJobType) |  Action being carried out for the job.   
  
pse.APICommonsService.BatchStatus
global inherited sharing class BatchStatus
Contains the status, error message and batch Id of a job.   

## Properties
Name | Type | Description  
---|---|---  
status | String |  Contains the status of the API request:   
• Completed means that the job was not sent to a batch, but was done inline and was successful.   
• Error means that an error occurred. The error message field contains an error message.   
• Batched implies that the job was successfully submitted as a batch job. The batchID contains the Id of the job.   
  
errorMessage | String |  Action being carried out for the job.   
  
jobID | Id |  Contains the Id of the batch if it was successfully submitted as a batch. jobID must be specified if you want to retrieve the status of a batch.   
  
## Methods
  * [global BatchStatus(String status, String errorMessage, Id jobID)](https://help.certinia.com/TechnicalReference/2025.1/ProfessionalServicesAutomation/Apex/APICommonsService.htm#BatchStatus0)


BatchStatus
_global BatchStatus(String status, String errorMessage, Id jobID)_
© Copyright 2009–2025 Certinia Inc. All rights reserved. Various trademarks held by their respective owners. 
